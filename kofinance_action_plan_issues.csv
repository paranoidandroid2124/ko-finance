epic,title,body,labels,milestone,estimate_sp
EPIC-INGEST-RESILIENCE,Implement DART ZIP->Viewer fallback with legal guard,"**Goal**: Ensure ingest continuity when OpenDART ZIP is missing/HTTP errors.
**Acceptance**:
- Fallback fetch from viewer endpoint when ZIP missing, with robots/ToS checks recorded in logs.
- Idempotency: duplicate-safe writes (hash on doc id+version).
- Feature flag to disable fallback per-issuer.
**Dependencies**: Legal review checklist; logging standard.
**Definition of Done**: Ingest success rate >=99% over 7 days, zero duplicate records in backfill tests.","area/backend,type/feature,priority/p0,epic/ingest",SPRINT-1 (0-2w),8
EPIC-INGEST-RESILIENCE,Retry & backfill queue with dead-letter handling,"**Goal**: Prevent ingest gaps and enable safe reprocessing.
**Acceptance**:
- Celery retry with exponential backoff; DLQ for >N retries.
- Backfill command supports date range and idempotent upsert.
- Metrics: retries_total, dlq_size, backfill_duration.
**Dependencies**: Celery Beat schedule; metrics stack.
**Definition of Done**: Backfill of a missing day completes <30 min on staging.","area/backend,type/chore,priority/p0,epic/ingest",SPRINT-1 (0-2w),5
EPIC-INGEST-RESILIENCE,Ingest error dashboard (Grafana),"**Goal**: Real-time visibility for ingest health.
**Acceptance**:
- Panels: success rate, TTF-Alert, error by source, top exceptions, p95 latency.
- Drill-down links to logs (Stackdriver/Cloud Logging).
**Dependencies**: Prometheus/OpenTelemetry exporters.
**Definition of Done**: On-call can diagnose a spike within 5 minutes.","area/devops,type/feature,priority/p1,epic/ingest",SPRINT-2 (2-4w),3
EPIC-ALERTS,"Unified Alert Model (rules, channels, schedules)","**Goal**: Consolidate alert logic for email/Telegram/web push.
**Acceptance**:
- Rule schema: triggers (keyword/sector/entity), thresholds, frequency, channels.
- CRUD API with validation tests.
**Dependencies**: User quotas by plan.
**Definition of Done**: Existing alerts migrated without data loss.","area/backend,type/feature,priority/p0,epic/alerts",SPRINT-1 (0-2w),5
EPIC-ALERTS,Alert Center UI (create/edit/preview),"**Goal**: One place to manage alerts.
**Acceptance**:
- Next.js page to list rules, toggle, duplicate, and preview recent matches.
- Empty state and quota indicator.
**Dependencies**: Unified Alert Model API.
**Definition of Done**: Usability test with 3 users; SUS >=75.","area/frontend,type/feature,priority/p1,epic/alerts",SPRINT-2 (2-4w),5
EPIC-ALERTS,Rule compiler worker & rate controls,"**Goal**: Efficient execution of alert rules.
**Acceptance**:
- Worker compiles rules to efficient queries; supports incremental state.
- Global per-user rate limits and per-channel cooldowns.
**Dependencies**: Queue infra; quotas.
**Definition of Done**: p95 rule evaluation latency <1s/rule on 1k rules.","area/backend,type/chore,priority/p1,epic/alerts",SPRINT-2 (2-4w),5
EPIC-RAG-SNIPPETS,Sentence-level anchor links (page/offset),"**Goal**: Click-to-verify evidence UX.
**Acceptance**:
- Each citation stores page + char offsets; front-end highlights segment.
- Deep links open to viewer at highlighted range.
**Dependencies**: PDF text mapping/OCR index.
**Definition of Done**: 95%+ of links open to correct span in QA set.","area/fullstack,type/feature,priority/p0,epic/rag",SPRINT-1 (0-2w),8
EPIC-RAG-SNIPPETS,Domain prompt presets (DIVIDEND/M&A/RESTATEMENT/CB),"**Goal**: Faster analyst workflows with tested prompts.
**Acceptance**:
- 8 templates with tool-usage hints; A/B evaluation set and scores.
- Template selection chips in UI.
**Dependencies**: RAG back-end; evaluation harness.
**Definition of Done**: Time-to-brief reduced by >=30% in pilot.","area/product,type/feature,priority/p1,epic/rag",SPRINT-2 (2-4w),3
EPIC-RAG-SNIPPETS,Hallucination guardrail tests,"**Goal**: Prevent ungrounded summaries.
**Acceptance**:
- Unit tests: citation-required mode; deny output without snippet id.
- Red team cases for near-miss phrasing.
**Dependencies**: Testing harness.
**Definition of Done**: 0 critical failures on guardrail suite.","area/backend,type/test,priority/p0,epic/rag",SPRINT-1 (0-2w),3
EPIC-RBAC-LIGHT,Org & role schema (viewer/editor/admin),"**Goal**: Minimal org-based access control.
**Acceptance**:
- Tables: orgs, user_orgs, roles; resource scoping for alerts/files.
- Migration scripts and seed roles.
**Dependencies**: Auth middleware.
**Definition of Done**: Access checks enforced on APIs; unit tests pass.","area/backend,type/feature,priority/p0,epic/rbac",SPRINT-1 (0-2w),5
EPIC-RBAC-LIGHT,Invite & role management UI,"**Goal**: Admin can invite users and change roles.
**Acceptance**:
- Invite via email; pending state; resend/cancel.
- Role dropdown: viewer/editor/admin; audit log.
**Dependencies**: RBAC schema.
**Definition of Done**: Two-person org flow verified on staging.","area/frontend,type/feature,priority/p1,epic/rbac",SPRINT-2 (2-4w),5
EPIC-OBSERVABILITY,OpenTelemetry tracing for ingest & RAG,"**Goal**: End-to-end traces across FastAPI/Celery.
**Acceptance**:
- Traces include span attrs: issuer, doc_id, model, tokens.
- Export to GCP Cloud Trace; sampling policy documented.
**Dependencies**: OTEL libs; env flags.
**Definition of Done**: 80%+ requests sampled in staging with low overhead.","area/devops,type/feature,priority/p1,epic/obs",SPRINT-1 (0-2w),3
EPIC-OBSERVABILITY,LLM cost monitor & budget alerts,"**Goal**: Prevent runaway spend.
**Acceptance**:
- Token accounting per feature/plan; daily budget thresholds.
- Slack/Telegram alert when >=80% of budget.
**Dependencies**: Billing metrics.
**Definition of Done**: Monthly cost variance <=10% vs forecast.","area/backend,type/feature,priority/p1,epic/obs",SPRINT-2 (2-4w),3
EPIC-BILLING-STARTER,Create Starter SKU in Toss Payments,"**Goal**: Introduce low-price paid entry.
**Acceptance**:
- Product/price created; webhook events handled (trial_started, active, past_due).
- UI price table updated with plan ladder.
**Dependencies**: Feature flags; legal copy.
**Definition of Done**: First paid Starter signup succeeds end-to-end.","area/backend,type/feature,priority/p0,epic/billing",SPRINT-1 (0-2w),3
EPIC-BILLING-STARTER,Plan-based quotas & feature flags,"**Goal**: Enforce plan entitlements.
**Acceptance**:
- Quotas: watchlists, rules, RAG/day, API calls.
- Feature toggles: table-extract, add-ins, SSO.
**Dependencies**: Auth context; persistence.
**Definition of Done**: Automated tests per plan pass.","area/backend,type/feature,priority/p0,epic/billing",SPRINT-1 (0-2w),5
EPIC-BILLING-STARTER,Free->Starter migration promo,"**Goal**: Convert free users.
**Acceptance**:
- 30-day Starter trial for existing users; email sequence (2 touches).
- In-app nudge with value props; conversion tracking.
**Dependencies**: Email infra; analytics.
**Definition of Done**: +3pp uplift in paid conversion within first month.","area/growth,type/feature,priority/p1,epic/billing",SPRINT-2 (2-4w),3
EPIC-ADDIN,BFF endpoints for add-ins (/api/addin/*),"**Goal**: Stable surface for Excel/Sheets.
**Acceptance**:
- Endpoints: filings.latest, news.search, brief.generate
- Auth via PAT scoped to read-only.
**Dependencies**: RAG/brief service.
**Definition of Done**: 200ms p95 on cached requests.","area/backend,type/feature,priority/p1,epic/addin",SPRINT-2 (2-4w),5
EPIC-ADDIN,Excel Office.js taskpane skeleton,"**Goal**: Proof-of-concept Excel add-in.
**Acceptance**:
- Commands: Insert latest filings, Refresh selection.
- Signed manifest; sideload docs.
**Dependencies**: BFF endpoints.
**Definition of Done**: Demo video & internal user walkthrough.","area/frontend,type/feature,priority/p2,epic/addin",SPRINT-3 (4-8w),8
EPIC-ADDIN,Google Sheets Apps Script sample,"**Goal**: Sheets integration example.
**Acceptance**:
- =KOFI.FILINGS(""005930"") custom function with caching.
- Minimal OAuth flow.
**Dependencies**: BFF endpoints.
**Definition of Done**: Example sheet shared with team.","area/frontend,type/feature,priority/p2,epic/addin",SPRINT-3 (4-8w),5
EPIC-TABLES,PDF table extraction pipeline (v0),"**Goal**: Turn tables into normalized schema.
**Acceptance**:
- Extractor for common DART templates; row/col headers normalized.
- Quality eval on 50 docs with >=90% cell accuracy on key tables.
**Dependencies**: OCR index; schema map.
**Definition of Done**: Data exported as JSON/CSV for 3 issuers.","area/backend,type/feature,priority/p1,epic/tables",SPRINT-3 (4-8w),8
EPIC-TABLES,Table Explorer-lite UI,"**Goal**: Browse and export extracted tables.
**Acceptance**:
- Side-by-side: source preview + normalized table.
- Export to CSV/Excel; column rename.
**Dependencies**: Extraction v0.
**Definition of Done**: Analyst completes a peer compare in <5 min.","area/frontend,type/feature,priority/p2,epic/tables",SPRINT-3 (4-8w),8
EPIC-SECURITY,Security Whitepaper v0,"**Goal**: External-facing trust document.
**Acceptance**:
- Coverage: auth, RBAC, data flow, encryption, logging, retention.
- PDF + website page; reviewed by eng & product.
**Dependencies**: Current architecture updated.
**Definition of Done**: Sales-ready link in pricing page.","area/docs,type/doc,priority/p1,epic/security",SPRINT-2 (2-4w),3
EPIC-SECURITY,Data localization default & DR plan,"**Goal**: Set default region & recovery posture.
**Acceptance**:
- GCP region set to asia-northeast3; backups cross-region.
- RPO/RTO targets documented.
**Dependencies**: Infra as code updates.
**Definition of Done**: Quarterly DR drill checklist added.","area/devops,type/chore,priority/p2,epic/security",SPRINT-3 (4-8w),5
EPIC-UX,Next.js i18n (ko/en) & copy pass,"**Goal**: Dual-language UI.
**Acceptance**:
- i18n routing; translation keys for top 10 pages.
- Glossary for finance terms.
**Dependencies**: Design tokens.
**Definition of Done**: Language toggle persists; no 404s.","area/frontend,type/feature,priority/p2,epic/ux",SPRINT-2 (2-4w),5
EPIC-UX,"PWA basics (manifest, offline shell)","**Goal**: Mobile/resilience improvements.
**Acceptance**:
- Installable PWA; offline shell for recent pages.
- Lighthouse PWA score >=85.
**Dependencies**: Caching strategy.
**Definition of Done**: Add-to-home-screen tested on Android/Chrome.","area/frontend,type/feature,priority/p3,epic/ux",SPRINT-3 (4-8w),3
EPIC-UX,Accessibility audit & quick fixes,"**Goal**: Meet baseline accessibility.
**Acceptance**:
- Keyboard nav; color contrast; alt text for charts/images.
- Fix top 10 lighthouse a11y issues.
**Dependencies**: Design tokens.
**Definition of Done**: Lighthouse a11y >=90 on key pages.","area/frontend,type/chore,priority/p2,epic/ux",SPRINT-2 (2-4w),3
EPIC-API,Public endpoints throttling & error codes standard,"**Goal**: Safer public preview endpoints.
**Acceptance**:
- Rate limit per IP & API key; RFC7807 error format.
- Security headers; CORS tightened.
**Dependencies**: Gateway/BFF.
**Definition of Done**: 0 open redirects; fuzz tests pass.","area/backend,type/feature,priority/p0,epic/api",SPRINT-1 (0-2w),5
EPIC-API,Analytics for upgrade funnel,"**Goal**: Measure conversion to Starter/Pro.
**Acceptance**:
- Events: signup, plan_view, upgrade_click, payment_success.
- Dashboard with conversion by source.
**Dependencies**: Frontend events; backend webhook.
**Definition of Done**: Weekly funnel review screenshot auto-posted.","area/growth,type/feature,priority/p1,epic/api",SPRINT-2 (2-4w),3
