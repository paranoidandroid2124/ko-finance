# LLM API Keys (from litellm_config.yaml)
GEMINI_API_KEY="YOUR_GEMINI_API_KEY"
OPENAI_API_KEY="YOUR_OPENAI_API_KEY"

# LLM Model Selection
LLM_CLASSIFICATION_MODEL=baseline
LLM_SUMMARY_MODEL=baseline
LLM_EXTRACTION_MODEL=baseline
LLM_SELF_CHECK_MODEL=baseline
LLM_NEWS_MODEL=baseline
LLM_RAG_MODEL=baseline
LLM_QUALITY_FALLBACK_MODEL=fallback_model
LLM_GUARD_JUDGE_MODEL=judge_model

# RAG deeplink/viewer configuration
RAG_LINK_DEEPLINK=true
DEEPLINK_SECRET="change-me-with-a-random-string"
DEEPLINK_TTL_SECONDS=900
# Supports absolute URLs (e.g., https://app.example.com/viewer) or relative paths (e.g., /viewer)
DEEPLINK_VIEWER_BASE_URL="http://localhost:3000/viewer"

# LiteLLM cache configuration (litellm service)
LITELLM_CACHE=redis
LITELLM_CACHE_URL=redis://redis:6379/2

# Celery Configuration (for parse/worker.py)
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/1

# DART OpenAPI (for ingest/dart_client.py)
DART_API_KEY="YOUR_DART_API_KEY"
INGEST_VIEWER_FALLBACK=true
LEGAL_LOG=true
# Optional: override viewer robots cache TTL (seconds, default 3600)
# DART_ROBOTS_TTL_SECONDS=3600

# Table Extraction v1
TABLE_EXTRACTION_TARGET_TYPES="dividend,treasury,cb_bw,financials"
TABLE_EXTRACTION_MAX_PAGES=20
TABLE_EXTRACTION_MAX_TABLES=80
TABLE_EXTRACTION_TAT_SECONDS=90
TABLE_EXTRACTION_WRITE_ARTIFACTS=true
TABLE_EXTRACTION_OUTPUT_DIR="reports/table_extraction"
TABLE_EXTRACTION_INCLUDE_UNKNOWN=false

# Postgres Database
POSTGRES_SERVER=postgres
POSTGRES_PORT=5432
POSTGRES_USER=kfinance
POSTGRES_PASSWORD=your_strong_password
POSTGRES_DB=kfinance_db
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_SERVER}:${POSTGRES_PORT}/${POSTGRES_DB}
TEST_DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_SERVER}:${POSTGRES_PORT}/${POSTGRES_DB}_test

# Telegram Bot (for services/notification_service.py)
TELEGRAM_BOT_TOKEN="YOUR_TELEGRAM_BOT_TOKEN"
TELEGRAM_CHAT_ID="YOUR_TELEGRAM_CHAT_ID"

# Alert delivery channels (Phase 3B)
ALERT_EMAIL_PROVIDER=nhn_rest
ALERT_EMAIL_FROM="alerts@example.com"
NHN_APP_KEY="your-nhn-app-key"
NHN_SECRET_KEY="your-nhn-secret-key"
NHN_EMAIL_BASE_URL="https://email.api.nhncloudservice.com"
NHN_SENDER_NAME="K-Finance"
NHN_SENDER_ADDRESS="alerts@example.com"
SMTP_HOST="smtp-mail.nhncloudservice.com"        # (옵션) SMTP 폴백용
SMTP_PORT=587
SMTP_USERNAME="your-nhncloudmail-username"
SMTP_PASSWORD="your-nhncloudmail-password"
SMTP_USE_TLS=true
ALERT_SLACK_WEBHOOK_URL="https://hooks.slack.com/services/XXXX/XXXX/XXXX"
ALERT_REQUEST_TIMEOUT=10
ALERT_REQUEST_RETRIES=3
APP_BRAND_NAME="K-Finance"
SUPPORT_EMAIL="support@example.com"
AUTH_FRONTEND_BASE_URL="http://localhost:3000"
PAGERDUTY_ROUTING_KEY=""

# Qdrant Vector Database (for services/vector_service.py)
QDRANT_HOST="qdrant"
QDRANT_PORT=6333
NEXT_PUBLIC_ENABLE_ADMIN_NAV=false

# Embedding Model (for services/vector_service.py)
EMBEDDING_MODEL="text-embedding-3-small"

# Langfuse Observability (optional)
LANGFUSE_PUBLIC_KEY=""
LANGFUSE_SECRET_KEY=""
LANGFUSE_HOST="https://cloud.langfuse.com"

# Toss Payments (sandbox/test keys)
TOSS_PAYMENTS_CLIENT_KEY="test_ck_xxxxxxxxxxxxx"
TOSS_PAYMENTS_SECRET_KEY="test_sk_xxxxxxxxxxxxx"
# TOSS_PAYMENTS_WEBHOOK_SECRET="test_whs_replace_me"
# Optional: override API base URL (defaults to https://api.tosspayments.com)
# TOSS_PAYMENTS_BASE_URL="https://api.tosspayments.com"
# Optional: redirect URLs used after payment success/failure
# TOSS_PAYMENTS_SUCCESS_URL="https://localhost:3000/payments/toss/success"
# TOSS_PAYMENTS_FAIL_URL="https://localhost:3000/payments/toss/fail"

# MinIO Cache (optional)
MINIO_ENDPOINT="localhost:9000"
MINIO_ACCESS_KEY="minioadmin"
MINIO_SECRET_KEY="minioadmin"
MINIO_BUCKET="kfinance-filings"
MINIO_SECURE=false

# News feeds (comma separated RSS/Atom URLs for M2)
NEWS_FEEDS="https://www.hankyung.com/feed/all-news,https://www.hankyung.com/feed/economy,https://www.hankyung.com/feed/finance,https://www.mk.co.kr/rss/30000001/,http://www.fsc.go.kr/about/fsc_bbs_rss/?fid=0111"
NEWS_FEED_TIMEOUT=10
NEWS_FEED_MAX_ATTEMPTS=2
NEWS_FEED_RETRY_BACKOFF=1.5
NEWS_FEED_RETRY_MAX_SLEEP=5
NEWS_FEED_USER_AGENT="KFinanceNewsBot/0.1 (+https://kfinance.ai)"

# News stats aggregation
NEWS_AGGREGATION_MINUTES=15
NEWS_TOPICS_LIMIT=5
NEWS_NEUTRAL_THRESHOLD=0.15

# LightMem (conversation/digest memory pipeline)
LIGHTMEM_ENABLED=false
LIGHTMEM_DIGEST_ENABLED=false
LIGHTMEM_WATCHLIST_ENABLED=false
LIGHTMEM_SESSION_TTL_MINUTES=120
LIGHTMEM_RETRIEVAL_K=5
LIGHTMEM_SENSORY_MAX_CHARS=1500
LIGHTMEM_REDIS_URL=redis://redis:6379/5
LIGHTMEM_DEFAULT_USER_ID=
LIGHTMEM_DIGEST_RATE_LIMIT_PER_MINUTE=60
#LIGHTMEM_RATE_LIMIT_REDIS_URL=
# 32-byte key, base64 encoded. Generate via: python - <<'PY' ...
LIGHTMEM_ENCRYPTION_KEY=""
LIGHTMEM_QDRANT_COLLECTION="k-finance-memory-store"
LIGHTMEM_VECTOR_DIM=384
LIGHTMEM_RATE_LIMIT_SLACK_WEBHOOK=""
LIGHTMEM_RATE_LIMIT_ALERT_COOLDOWN_SECONDS=300
# LightMem health monitoring alerts (optional)
LIGHTMEM_HEALTH_ALERT_ENABLED=true
LIGHTMEM_HEALTH_ALERT_CHANNEL=slack
#LIGHTMEM_HEALTH_ALERT_TARGETS=https://hooks.slack.com/services/XXX/YYY/ZZZ
OPS_ACCESS_TOKEN=""
WATCHLIST_PERSONAL_NOTE_MAX_CALLS=5
WATCHLIST_PERSONAL_NOTE_CACHE_SECONDS=3600
WATCHLIST_PERSONAL_NOTE_MIN_INTERVAL_SECONDS=2
WATCHLIST_PERSONAL_NOTE_TASK_TIMEOUT_SECONDS=30

# RBAC / organisation access control
RBAC_ENFORCE=false

# SSO / SCIM provisioning
AUTH_SSO_STATE_TTL_SECONDS=600
# AUTH_SSO_STATE_SECRET="change-me"
AUTH_SAML_ENABLED=false
AUTH_SAML_SP_ENTITY_ID="urn:kfinance:sp"
AUTH_SAML_ACS_URL="http://localhost:8000/api/v1/auth/saml/acs"
AUTH_SAML_METADATA_URL="http://localhost:8000/api/v1/auth/saml/metadata"
# AUTH_SAML_SP_CERT="-----BEGIN CERTIFICATE-----\n...\n-----END CERTIFICATE-----"
AUTH_SAML_IDP_ENTITY_ID=""
AUTH_SAML_IDP_SSO_URL=""
# AUTH_SAML_IDP_CERT=""
AUTH_SAML_EMAIL_ATTRIBUTE="email"
AUTH_SAML_NAME_ATTRIBUTE="displayName"
AUTH_SAML_ROLE_ATTRIBUTE="role"
AUTH_SAML_ORG_ATTRIBUTE="orgSlug"
AUTH_SAML_DEFAULT_ORG_SLUG=""
AUTH_SAML_DEFAULT_RBAC_ROLE="viewer"
AUTH_SAML_ROLE_MAPPING="admin:admin;owner:admin;editor:editor;viewer:viewer"
AUTH_SAML_AUTO_PROVISION_ORG=false
AUTH_SAML_DEFAULT_PLAN_TIER="enterprise"
AUTH_OIDC_ENABLED=false
AUTH_OIDC_CLIENT_ID=""
AUTH_OIDC_CLIENT_SECRET=""
AUTH_OIDC_AUTHORIZATION_URL=""
AUTH_OIDC_TOKEN_URL=""
AUTH_OIDC_USERINFO_URL=""
AUTH_OIDC_REDIRECT_URI="http://localhost:8000/api/v1/auth/oidc/callback"
AUTH_OIDC_SCOPES="openid email profile"
AUTH_OIDC_ORG_CLAIM="org"
AUTH_OIDC_ROLE_CLAIM="role"
AUTH_OIDC_PLAN_CLAIM="plan"
AUTH_OIDC_EMAIL_CLAIM="email"
AUTH_OIDC_NAME_CLAIM="name"
AUTH_OIDC_DEFAULT_RBAC_ROLE="viewer"
AUTH_OIDC_ROLE_MAPPING="admin:admin;owner:admin;editor:editor;viewer:viewer"
AUTH_OIDC_DEFAULT_PLAN_TIER="enterprise"
AUTH_OIDC_AUTO_PROVISION_ORG=false
SCIM_BEARER_TOKEN=""
SCIM_MAX_PAGE_SIZE=100
SCIM_AUTO_PROVISION_ORG=false

# Admin console / operations access
ADMIN_API_TOKENS="admin:replace_me"
# ADMIN_API_TOKEN="fallback_token"
ADMIN_SESSION_TTL_SECONDS=604800
ADMIN_SESSION_COOKIE_NAME=admin_session
ADMIN_SESSION_COOKIE_SAMESITE=Lax
ADMIN_SESSION_COOKIE_SECURE=false
GOOGLE_ADMIN_CLIENT_ID=""
GOOGLE_ADMIN_ALLOWED_DOMAIN="kofilot.com"
ADMIN_ALLOWED_EMAILS="ops@kofilot.com"
ADMIN_MFA_SECRETS="ops@kofilot.com:JBSWY3DPEHPK3PXP"
ADMIN_REQUIRE_MFA=false

# Starter SKU toggles
NEXT_PUBLIC_STARTER_ENABLED=false
NEXT_PUBLIC_STARTER_CHECKOUT_URL=https://checkout.kfinance.ai/starter
