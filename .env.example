# Authentication / security controls
AUTH_JWT_SECRET="CHANGE_ME_JWT_SECRET"
AUTH_ACCESS_TOKEN_TTL_SECONDS=900
AUTH_REFRESH_TOKEN_TTL_SECONDS=604800
AUTH_REMEMBER_REFRESH_TTL_SECONDS=2592000
AUTH_PASSWORD_MIN_LENGTH=12
AUTH_PASSWORD_REQUIRE_UPPER=true
AUTH_PASSWORD_REQUIRE_LOWER=true
AUTH_PASSWORD_REQUIRE_DIGIT=true
AUTH_PASSWORD_REQUIRE_SYMBOL=true
AUTH_LOGIN_IP_RATE_LIMIT=10
AUTH_LOGIN_IP_RATE_WINDOW_SECONDS=300
AUTH_LOGIN_EMAIL_RATE_LIMIT=5
AUTH_LOGIN_EMAIL_RATE_WINDOW_SECONDS=300
AUTH_RATE_LIMIT_REDIS_URL=redis://redis:6379/7

# LLM
OPENAI_API_KEY="YOUR_OPENAI_API_KEY"


# RAG deeplink/viewer configuration
RAG_LINK_DEEPLINK=true
DEEPLINK_SECRET="change-me-with-a-random-string"
DEEPLINK_TTL_SECONDS=900
# Supports absolute URLs (e.g., https://app.example.com/viewer) or relative paths (e.g., /viewer)
DEEPLINK_VIEWER_BASE_URL="http://localhost:3000/viewer"

# Plan configuration storage
PLAN_CONFIG_FILE="uploads/admin/plan_config.json"
PLAN_CATALOG_FILE="uploads/admin/plan_catalog.json"
PLAN_SETTINGS_FILE="uploads/admin/plan_settings.json"
NEWS_SUMMARY_CACHE_PATH="uploads/news/summary_cache.json"
# Enable client-side plan debug overrides (0 disables in production)
NEXT_PUBLIC_ENABLE_PLAN_DEBUG_TOOLS=0

# Event Study export bundle storage
EVENT_BRIEF_OUTPUT_DIR="uploads/admin/event_briefs"
EVENT_BRIEF_OBJECT_PREFIX="event-briefs"
EVENT_BUNDLE_RETENTION_DAYS=30

# ---------------------------------------------------------------------------
# ---------------------------------------------------------------------------
# Compliance / Data Retention
# ---------------------------------------------------------------------------
# (Removed: Retention policies and DSAR are disabled in this version)

# LiteLLM cache configuration (litellm service)
LITELLM_CACHE=redis
LITELLM_CACHE_URL=redis://redis:6379/2

# Celery Configuration (for parse/worker.py)
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/1

# DART OpenAPI (for ingest/dart_client.py)
DART_API_KEY="YOUR_DART_API_KEY"
INGEST_VIEWER_FALLBACK=true
LEGAL_LOG=true
# Optional: override viewer robots cache TTL (seconds, default 3600)
# DART_ROBOTS_TTL_SECONDS=3600

# Database (Supabase)
DATABASE_URL=postgresql://postgres:your_password@db.xxxxxxxxxxxxx.supabase.co:5432/postgres



# Alert delivery channels (Phase 3B)
ALERT_SLACK_WEBHOOK_URL="https://hooks.slack.com/services/XXXX/XXXX/XXXX"
ALERT_REQUEST_TIMEOUT=10
ALERT_REQUEST_RETRIES=3
ALERTS_CHANNEL_FAILURE_COOLDOWN_MINUTES=15
ALERTS_FAILURE_SLACK_TARGETS="#ops-alerts,#watchlist-alerts"
APP_BRAND_NAME="Nuvien"
SUPPORT_EMAIL="support@example.com"
AUTH_FRONTEND_BASE_URL="http://localhost:3000"

# Qdrant Vector Database (for services/vector_service.py)
QDRANT_HOST="qdrant"
QDRANT_PORT=6333
# Show admin nav locally/staging; override to false when building for production.
NEXT_PUBLIC_ENABLE_ADMIN_NAV=true
NEXT_PUBLIC_ENABLE_LABS=false

# Embedding Model (for services/vector_service.py)
EMBEDDING_MODEL="text-embedding-3-small"

# Hybrid search + reranker toggles
SEARCH_MODE="hybrid"  # vector | hybrid
BM25_TOPN=80
DENSE_TOPN=80
RRF_K=60
RERANK_PROVIDER="vertex"
RERANK_MODEL="semantic-ranker-default@latest"
RERANK_RANKING_CONFIG="projects/your-project/locations/global/rankingConfigs/default_ranking_config"
RERANK_TOPK=50
RERANK_TIMEOUT_MS=2000
RERANK_CACHE_TTL_S=604800

# Toss Payments
TOSS_PAYMENTS_CLIENT_KEY="test_ck_xxxxxxxxxxxxx"
TOSS_PAYMENTS_SECRET_KEY="test_sk_xxxxxxxxxxxxx"

# MinIO Cache (optional)
MINIO_ENDPOINT="localhost:9000"
MINIO_ACCESS_KEY="minioadmin"
MINIO_SECRET_KEY="minioadmin"
MINIO_BUCKET="kfinance-filings"
MINIO_SECURE=false

# News feeds (comma separated RSS/Atom URLs for M2)
NEWS_FEEDS="https://www.hankyung.com/feed/all-news,https://www.hankyung.com/feed/economy,https://www.hankyung.com/feed/finance,https://www.mk.co.kr/rss/30000001/,http://www.fsc.go.kr/about/fsc_bbs_rss/?fid=0111"
NEWS_FEED_TIMEOUT=10
NEWS_FEED_MAX_ATTEMPTS=2
NEWS_FEED_RETRY_BACKOFF=1.5
NEWS_FEED_RETRY_MAX_SLEEP=5
NEWS_FEED_USER_AGENT="KFinanceNewsBot/0.1 (+https://kfinance.ai)"

# News stats aggregation
NEWS_AGGREGATION_MINUTES=15
NEWS_TOPICS_LIMIT=5
NEWS_NEUTRAL_THRESHOLD=0.15

# LightMem (conversation/digest memory pipeline)
LIGHTMEM_HEALTH_ALERT_ENABLED=true
LIGHTMEM_HEALTH_ALERT_CHANNEL=slack
OPS_ACCESS_TOKEN=""


# Starter SKU toggles
NEXT_PUBLIC_STARTER_ENABLED=false
NEXT_PUBLIC_STARTER_CHECKOUT_URL=https://checkout.kfinance.ai/starter
